
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>src.pyconf &#8212; salomeTools 5.0.0dev documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for src.pyconf</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1">#-*- coding:utf-8 -*-</span>

<span class="c1"># Copyright 2004-2007 by Vinay Sajip. All Rights Reserved.</span>
<span class="c1">#</span>
<span class="c1"># Permission to use, copy, modify, and distribute this software and its</span>
<span class="c1"># documentation for any purpose and without fee is hereby granted,</span>
<span class="c1"># provided that the above copyright notice appear in all copies and that</span>
<span class="c1"># both that copyright notice and this permission notice appear in</span>
<span class="c1"># supporting documentation, and that the name of Vinay Sajip</span>
<span class="c1"># not be used in advertising or publicity pertaining to distribution</span>
<span class="c1"># of the software without specific, written prior permission.</span>
<span class="c1"># VINAY SAJIP DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING</span>
<span class="c1"># ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL</span>
<span class="c1"># VINAY SAJIP BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR</span>
<span class="c1"># ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER</span>
<span class="c1"># IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT</span>
<span class="c1"># OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span>

<span class="c1">#  Copyright (C) 2010-2013  CEA/DEN</span>
<span class="c1">#</span>
<span class="c1">#  This library is free software; you can redistribute it and/or</span>
<span class="c1">#  modify it under the terms of the GNU Lesser General Public</span>
<span class="c1">#  License as published by the Free Software Foundation; either</span>
<span class="c1">#  version 2.1 of the License.</span>
<span class="c1">#</span>
<span class="c1">#  This library is distributed in the hope that it will be useful,</span>
<span class="c1">#  but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</span>
<span class="c1">#  Lesser General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1">#  You should have received a copy of the GNU Lesser General Public</span>
<span class="c1">#  License along with this library; if not, write to the Free Software</span>
<span class="c1">#  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA</span>

<span class="c1"># CEA adds : </span>
<span class="c1"># Possibility to overwrites value in a pyconf file</span>
<span class="c1"># Python 3 porting</span>


<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This is a configuration module for Python.</span>

<span class="sd">This module should work under Python versions &gt;= 2.2, and cannot be used with</span>
<span class="sd">earlier versions since it uses new-style classes.</span>

<span class="sd">Development and testing has only been carried out (so far) on Python 2.3.4 and</span>
<span class="sd">Python 2.4.2. See the test module (test_config.py) included in the</span>
<span class="sd">U{distribution&lt;http://www.red-dove.com/python_config.html|_blank&gt;} (follow the</span>
<span class="sd">download link).</span>

<span class="sd">A simple example - with the example configuration file::</span>

<span class="sd">    messages:</span>
<span class="sd">    [</span>
<span class="sd">      {</span>
<span class="sd">        stream : `sys.stderr`</span>
<span class="sd">        message: &#39;Welcome&#39;</span>
<span class="sd">        name: &#39;Harry&#39;</span>
<span class="sd">      }</span>
<span class="sd">      {</span>
<span class="sd">        stream : `sys.stdout`</span>
<span class="sd">        message: &#39;Welkom&#39;</span>
<span class="sd">        name: &#39;Ruud&#39;</span>
<span class="sd">      }</span>
<span class="sd">      {</span>
<span class="sd">        stream : $messages[0].stream</span>
<span class="sd">        message: &#39;Bienvenue&#39;</span>
<span class="sd">        name: Yves</span>
<span class="sd">      }</span>
<span class="sd">    ]</span>

<span class="sd">a program to read the configuration would be::</span>

<span class="sd">    from config import Config</span>

<span class="sd">    f = file(&#39;simple.cfg&#39;)</span>
<span class="sd">    cfg = Config(f)</span>
<span class="sd">    for m in cfg.messages:</span>
<span class="sd">        s = &#39;%s, %s&#39; % (m.message, m.name)</span>
<span class="sd">        try:</span>
<span class="sd">            print &gt;&gt; m.stream, s</span>
<span class="sd">        except IOError, e:</span>
<span class="sd">            print e</span>

<span class="sd">which, when run, would yield the console output::</span>

<span class="sd">    Welcome, Harry</span>
<span class="sd">    Welkom, Ruud</span>
<span class="sd">    Bienvenue, Yves</span>

<span class="sd">See U{this tutorial&lt;http://www.red-dove.com/python_config.html|_blank&gt;} for more</span>
<span class="sd">information.</span>

<span class="sd">#modified for salomeTools</span>
<span class="sd">@version: 0.3.7.1</span>

<span class="sd">@author: Vinay Sajip</span>

<span class="sd">@copyright: Copyright (C) 2004-2007 Vinay Sajip. All Rights Reserved.</span>


<span class="sd">@var streamOpener: The default stream opener. This is a factory function which</span>
<span class="sd">takes a string (e.g. filename) and returns a stream suitable for reading. If</span>
<span class="sd">unable to open the stream, an IOError exception should be thrown.</span>

<span class="sd">The default value of this variable is L{defaultStreamOpener}. For an example</span>
<span class="sd">of how it&#39;s used, see test_config.py (search for streamOpener).</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__author__</span>  <span class="o">=</span> <span class="s2">&quot;Vinay Sajip &lt;vinay_sajip@red-dove.com&gt;&quot;</span>
<span class="n">__status__</span>  <span class="o">=</span> <span class="s2">&quot;alpha&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;0.3.7.1&quot;</span> <span class="c1">#modified for salomeTools</span>
<span class="n">__date__</span>    <span class="o">=</span> <span class="s2">&quot;05 October 2007&quot;</span>

<span class="kn">import</span> <span class="nn">codecs</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">WORD</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
<span class="n">NUMBER</span> <span class="o">=</span> <span class="s1">&#39;9&#39;</span>
<span class="n">STRING</span> <span class="o">=</span> <span class="s1">&#39;&quot;&#39;</span>
<span class="n">EOF</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
<span class="n">LCURLY</span> <span class="o">=</span> <span class="s1">&#39;{&#39;</span>
<span class="n">RCURLY</span> <span class="o">=</span> <span class="s1">&#39;}&#39;</span>
<span class="n">LBRACK</span> <span class="o">=</span> <span class="s1">&#39;[&#39;</span>
<span class="n">LBRACK2</span> <span class="o">=</span> <span class="s1">&#39;a[&#39;</span>
<span class="n">RBRACK</span> <span class="o">=</span> <span class="s1">&#39;]&#39;</span>
<span class="n">LPAREN</span> <span class="o">=</span> <span class="s1">&#39;(&#39;</span>
<span class="n">LPAREN2</span> <span class="o">=</span> <span class="s1">&#39;((&#39;</span>
<span class="n">RPAREN</span> <span class="o">=</span> <span class="s1">&#39;)&#39;</span>
<span class="n">DOT</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span>
<span class="n">COMMA</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span>
<span class="n">COLON</span> <span class="o">=</span> <span class="s1">&#39;:&#39;</span>
<span class="n">AT</span> <span class="o">=</span> <span class="s1">&#39;@&#39;</span>
<span class="n">PLUS</span> <span class="o">=</span> <span class="s1">&#39;+&#39;</span>
<span class="n">MINUS</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span>
<span class="n">STAR</span> <span class="o">=</span> <span class="s1">&#39;*&#39;</span>
<span class="n">SLASH</span> <span class="o">=</span> <span class="s1">&#39;/&#39;</span>
<span class="n">MOD</span> <span class="o">=</span> <span class="s1">&#39;%&#39;</span>
<span class="n">BACKTICK</span> <span class="o">=</span> <span class="s1">&#39;`&#39;</span>
<span class="n">DOLLAR</span> <span class="o">=</span> <span class="s1">&#39;$&#39;</span>
<span class="n">TRUE</span> <span class="o">=</span> <span class="s1">&#39;True&#39;</span>
<span class="n">FALSE</span> <span class="o">=</span> <span class="s1">&#39;False&#39;</span>
<span class="n">NONE</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>

<span class="n">WORDCHARS</span> <span class="o">=</span> <span class="s2">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_&quot;</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s1">&#39;win32&#39;</span><span class="p">:</span>
    <span class="n">NEWLINE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">&#39;</span>
<span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;mac&#39;</span><span class="p">:</span>
    <span class="n">NEWLINE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\r</span><span class="s1">&#39;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">NEWLINE</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">has_utf32</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">has_utf32</span> <span class="o">=</span> <span class="kc">False</span>

<div class="viewcode-block" id="ConfigInputStream"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigInputStream">[docs]</a><span class="k">class</span> <span class="nc">ConfigInputStream</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An input stream which can read either ANSI files with default encoding</span>
<span class="sd">    or Unicode files with BOMs.</span>

<span class="sd">    Handles UTF-8, UTF-16LE, UTF-16BE. Could handle UTF-32 if Python had</span>
<span class="sd">    built-in support.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an instance.</span>

<span class="sd">        @param stream: The underlying stream to be read. Should be seekable.</span>
<span class="sd">        @type stream: A stream (file-like object).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">encoding</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">used</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">has_utf32</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">signature</span> <span class="o">==</span> <span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF32_LE</span><span class="p">:</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-32le&#39;</span>
            <span class="k">elif</span> <span class="n">signature</span> <span class="o">==</span> <span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF32_BE</span><span class="p">:</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-32be&#39;</span>
        <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">signature</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF8</span><span class="p">:</span>
                <span class="n">used</span> <span class="o">=</span> <span class="mi">3</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span>
            <span class="k">elif</span> <span class="n">signature</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF16_LE</span><span class="p">:</span>
                <span class="n">used</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-16le&#39;</span>
            <span class="k">elif</span> <span class="n">signature</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF16_BE</span><span class="p">:</span>
                <span class="n">used</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-16be&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">used</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">used</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">used</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">encoding</span><span class="p">:</span>
            <span class="n">reader</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">getreader</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">reader</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="n">encoding</span>

<div class="viewcode-block" id="ConfigInputStream.read"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigInputStream.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;&#39;</span>
            <span class="k">while</span> <span class="n">size</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">rv</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                <span class="n">size</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">rv</span></div>

<div class="viewcode-block" id="ConfigInputStream.close"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigInputStream.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="ConfigInputStream.readline"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigInputStream.readline">[docs]</a>    <span class="k">def</span> <span class="nf">readline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">line</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;&#39;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">c</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">+=</span> <span class="n">c</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">line</span></div></div>

<div class="viewcode-block" id="ConfigOutputStream"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigOutputStream">[docs]</a><span class="k">class</span> <span class="nc">ConfigOutputStream</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An output stream which can write either ANSI files with default encoding</span>
<span class="sd">    or Unicode files with BOMs.</span>

<span class="sd">    Handles UTF-8, UTF-16LE, UTF-16BE. Could handle UTF-32 if Python had</span>
<span class="sd">    built-in support.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an instance.</span>

<span class="sd">        @param stream: The underlying stream to be written.</span>
<span class="sd">        @type stream: A stream (file-like object).</span>
<span class="sd">        @param encoding: The desired encoding.</span>
<span class="sd">        @type encoding: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">encoding</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="n">encoding</span>
        <span class="k">if</span> <span class="n">encoding</span> <span class="o">==</span> <span class="s2">&quot;utf-8&quot;</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF8</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">encoding</span> <span class="o">==</span> <span class="s2">&quot;utf-16be&quot;</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF16_BE</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">encoding</span> <span class="o">==</span> <span class="s2">&quot;utf-16le&quot;</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF16_LE</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">encoding</span> <span class="o">==</span> <span class="s2">&quot;utf-32be&quot;</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF32_BE</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">encoding</span> <span class="o">==</span> <span class="s2">&quot;utf-32le&quot;</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF32_LE</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">getwriter</span><span class="p">(</span><span class="n">encoding</span><span class="p">)</span>
            <span class="n">stream</span> <span class="o">=</span> <span class="n">writer</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>

<div class="viewcode-block" id="ConfigOutputStream.write"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigOutputStream.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConfigOutputStream.flush"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigOutputStream.flush">[docs]</a>    <span class="k">def</span> <span class="nf">flush</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span></div>

<div class="viewcode-block" id="ConfigOutputStream.close"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigOutputStream.close">[docs]</a>    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>

<div class="viewcode-block" id="defaultStreamOpener"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.defaultStreamOpener">[docs]</a><span class="k">def</span> <span class="nf">defaultStreamOpener</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function returns a read-only stream, given its name. The name passed</span>
<span class="sd">    in should correspond to an existing stream, otherwise an exception will be</span>
<span class="sd">    raised.</span>

<span class="sd">    This is the default value of L{streamOpener}; assign your own callable to</span>
<span class="sd">    streamOpener to return streams based on names. For example, you could use</span>
<span class="sd">    urllib2.urlopen().</span>

<span class="sd">    @param name: The name of a stream, most commonly a file name.</span>
<span class="sd">    @type name: str</span>
<span class="sd">    @return: A stream with the specified name.</span>
<span class="sd">    @rtype: A read-only stream (file-like object)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ConfigInputStream</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">))</span></div>

<span class="n">streamOpener</span> <span class="o">=</span> <span class="kc">None</span>

<span class="n">__resolveOverwrite__</span> <span class="o">=</span> <span class="kc">True</span>

<div class="viewcode-block" id="ConfigError"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigError">[docs]</a><span class="k">class</span> <span class="nc">ConfigError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the base class of exceptions raised by this module.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="ConfigFormatError"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigFormatError">[docs]</a><span class="k">class</span> <span class="nc">ConfigFormatError</span><span class="p">(</span><span class="n">ConfigError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the base class of exceptions raised due to syntax errors in</span>
<span class="sd">    configurations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="ConfigResolutionError"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigResolutionError">[docs]</a><span class="k">class</span> <span class="nc">ConfigResolutionError</span><span class="p">(</span><span class="n">ConfigError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the base class of exceptions raised due to semantic errors in</span>
<span class="sd">    configurations.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>

<div class="viewcode-block" id="isWord"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.isWord">[docs]</a><span class="k">def</span> <span class="nf">isWord</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    See if a passed-in value is an identifier. If the value passed in is not a</span>
<span class="sd">    string, False is returned. An identifier consists of alphanumerics or</span>
<span class="sd">    underscore characters.</span>

<span class="sd">    Examples::</span>

<span class="sd">        isWord(&#39;a word&#39;) -&gt;False</span>
<span class="sd">        isWord(&#39;award&#39;) -&gt; True</span>
<span class="sd">        isWord(9) -&gt; False</span>
<span class="sd">        isWord(&#39;a_b_c_&#39;) -&gt;True</span>

<span class="sd">    @note: isWord(&#39;9abc&#39;) will return True - not exactly correct, but adequate</span>
<span class="sd">    for the way it&#39;s used here.</span>

<span class="sd">    @param s: The name to be tested</span>
<span class="sd">    @type s: any</span>
<span class="sd">    @return: True if a word, else False</span>
<span class="sd">    @rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">type</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">s</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span></div>

<div class="viewcode-block" id="makePath"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.makePath">[docs]</a><span class="k">def</span> <span class="nf">makePath</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">suffix</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Make a path from a prefix and suffix.</span>

<span class="sd">    Examples::</span>
<span class="sd">    makePath(&#39;&#39;, &#39;suffix&#39;) -&gt; &#39;suffix&#39;</span>
<span class="sd">    makePath(&#39;prefix&#39;, &#39;suffix&#39;) -&gt; &#39;prefix.suffix&#39;</span>
<span class="sd">    makePath(&#39;prefix&#39;, &#39;[1]&#39;) -&gt; &#39;prefix[1]&#39;</span>

<span class="sd">    @param prefix:  The prefix to use. If it evaluates as false, the suffix is returned.</span>
<span class="sd">    @type prefix:   str</span>
<span class="sd">    @param suffix:  The suffix to use. It is either an identifier or an index in brackets.</span>
<span class="sd">    @type suffix:   str</span>
<span class="sd">    @return:        The path concatenation of prefix and suffix, with a dot if the suffix is not a bracketed index.</span>
<span class="sd">    @rtype:         str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">prefix</span><span class="p">:</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix</span>
    <span class="k">elif</span> <span class="n">suffix</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;[&#39;</span><span class="p">:</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="n">suffix</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">prefix</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="n">suffix</span>
    <span class="k">return</span> <span class="n">rv</span></div>


<div class="viewcode-block" id="Container"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Container">[docs]</a><span class="k">class</span> <span class="nc">Container</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This internal class is the base class for mappings and sequences.</span>

<span class="sd">    @ivar path: A string which describes how to get</span>
<span class="sd">    to this instance from the root of the hierarchy.</span>

<span class="sd">    Example::</span>

<span class="sd">        a.list.of[1].or[&#39;more&#39;].elements</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an instance.</span>

<span class="sd">        @param parent: The parent of this instance in the hierarchy.</span>
<span class="sd">        @type parent: A L{Container} instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>

<div class="viewcode-block" id="Container.setPath"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Container.setPath">[docs]</a>    <span class="k">def</span> <span class="nf">setPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the path for this instance.</span>
<span class="sd">        @param path: The path - a string which describes how to get</span>
<span class="sd">        to this instance from the root of the hierarchy.</span>
<span class="sd">        @type path: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span></div>

<div class="viewcode-block" id="Container.evaluate"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Container.evaluate">[docs]</a>    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluate items which are instances of L{Reference} or L{Expression}.</span>

<span class="sd">        L{Reference} instances are evaluated using L{Reference.resolve},</span>
<span class="sd">        and L{Expression} instances are evaluated using</span>
<span class="sd">        L{Expression.evaluate}.</span>

<span class="sd">        @param item: The item to be evaluated.</span>
<span class="sd">        @type item: any</span>
<span class="sd">        @return: If the item is an instance of L{Reference} or L{Expression},</span>
<span class="sd">        the evaluated value is returned, otherwise the item is returned</span>
<span class="sd">        unchanged.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Reference</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">item</span></div>

<div class="viewcode-block" id="Container.writeToStream"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Container.writeToStream">[docs]</a>    <span class="k">def</span> <span class="nf">writeToStream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write this instance to a stream at the specified indentation level.</span>

<span class="sd">        Should be redefined in subclasses.</span>

<span class="sd">        @param stream: The stream to write to</span>
<span class="sd">        @type stream: A writable stream (file-like object)</span>
<span class="sd">        @param indent: The indentation level</span>
<span class="sd">        @type indent: int</span>
<span class="sd">        @param container: The container of this instance</span>
<span class="sd">        @type container: L{Container}</span>
<span class="sd">        @raise NotImplementedError: If a subclass does not override this</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="Container.writeValue"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Container.writeValue">[docs]</a>    <span class="k">def</span> <span class="nf">writeValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
            <span class="n">indstr</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">indstr</span> <span class="o">=</span> <span class="n">indent</span> <span class="o">*</span> <span class="s1">&#39;  &#39;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Reference</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%r%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indstr</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">NEWLINE</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> <span class="c1"># and not isWord(value):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indstr</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">NEWLINE</span><span class="p">))</span></div></div>

<div class="viewcode-block" id="Mapping"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Mapping">[docs]</a><span class="k">class</span> <span class="nc">Mapping</span><span class="p">(</span><span class="n">Container</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This internal class implements key-value mappings in configurations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an instance.</span>

<span class="sd">        @param parent: The parent of this instance in the hierarchy.</span>
<span class="sd">        @type parent: A L{Container} instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Container</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">,</span> <span class="p">[])</span>   <span class="c1"># to preserve ordering</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="p">{})</span>

    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove an item</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">)</span>
        <span class="n">comments</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="n">order</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">comments</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>

    <span class="fm">__getattr__</span> <span class="o">=</span> <span class="fm">__getitem__</span>
    
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    def __getattribute__(self, name):</span>
<span class="sd">        if name == &quot;__dict__&quot;:</span>
<span class="sd">            return {}</span>
<span class="sd">        if name in [&quot;__methods__&quot;, &quot;__members__&quot;]:</span>
<span class="sd">            return []</span>
<span class="sd">        #if name == &quot;__class__&quot;:</span>
<span class="sd">        #    return &#39;&#39;</span>
<span class="sd">        data = object.__getattribute__(self, &quot;data&quot;)</span>
<span class="sd">        useData = data.has_key(name)</span>
<span class="sd">        if useData:</span>
<span class="sd">            rv = getattr(data, name)</span>
<span class="sd">        else:</span>
<span class="sd">            rv = object.__getattribute__(self, name)</span>
<span class="sd">            if rv is None:</span>
<span class="sd">                raise AttributeError(name)</span>
<span class="sd">        return rv</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Mapping.iteritems"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Mapping.iteritems">[docs]</a>    <span class="k">def</span> <span class="nf">iteritems</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">yield</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
        <span class="k">raise</span> <span class="ne">StopIteration</span></div>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">order</span>

<div class="viewcode-block" id="Mapping.addMapping"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Mapping.addMapping">[docs]</a>    <span class="k">def</span> <span class="nf">addMapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">comment</span><span class="p">,</span> <span class="n">setting</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a key-value mapping with a comment.</span>

<span class="sd">        @param key: The key for the mapping.</span>
<span class="sd">        @type key: str</span>
<span class="sd">        @param value: The value for the mapping.</span>
<span class="sd">        @type value: any</span>
<span class="sd">        @param comment: The comment for the key (can be None).</span>
<span class="sd">        @type comment: str</span>
<span class="sd">        @param setting: If True, ignore clashes. This is set</span>
<span class="sd">        to true when called from L{__setattr__}.</span>
<span class="sd">        @raise ConfigFormatError: If an existing key is seen</span>
<span class="sd">        again and setting is False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">)</span>
        <span class="n">comments</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">)</span>

        <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">order</span><span class="p">:</span>
            <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">setting</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="s2">&quot;repeated key: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">key</span><span class="p">)</span>
        <span class="n">comments</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">comment</span></div>

    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addMapping</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="fm">__setitem__</span> <span class="o">=</span> <span class="fm">__setattr__</span>

<div class="viewcode-block" id="Mapping.keys"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Mapping.keys">[docs]</a>    <span class="k">def</span> <span class="nf">keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the keys in a similar way to a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Mapping.get"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Mapping.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Allows a dictionary-style get operation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">default</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterkeys</span><span class="p">()</span>

<div class="viewcode-block" id="Mapping.iterkeys"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Mapping.iterkeys">[docs]</a>    <span class="k">def</span> <span class="nf">iterkeys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">order</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span></div>

<div class="viewcode-block" id="Mapping.writeToStream"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Mapping.writeToStream">[docs]</a>    <span class="k">def</span> <span class="nf">writeToStream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write this instance to a stream at the specified indentation level.</span>

<span class="sd">        Should be redefined in subclasses.</span>

<span class="sd">        @param stream: The stream to write to</span>
<span class="sd">        @type stream: A writable stream (file-like object)</span>
<span class="sd">        @param indent: The indentation level</span>
<span class="sd">        @type indent: int</span>
<span class="sd">        @param container: The container of this instance</span>
<span class="sd">        @type container: L{Container}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indstr</span> <span class="o">=</span> <span class="n">indent</span> <span class="o">*</span> <span class="s1">&#39;  &#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; { }</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">NEWLINE</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
                <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">NEWLINE</span><span class="p">)</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">{</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indstr</span><span class="p">,</span> <span class="n">NEWLINE</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__save__</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">}</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indstr</span><span class="p">,</span> <span class="n">NEWLINE</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">__save__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save this configuration to the specified stream.</span>
<span class="sd">        @param stream: A stream to which the configuration is written.</span>
<span class="sd">        @type stream: A write-only stream (file-like object).</span>
<span class="sd">        @param indent: The indentation level for the output.</span>
<span class="sd">        @type indent: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indstr</span> <span class="o">=</span> <span class="n">indent</span> <span class="o">*</span> <span class="s1">&#39;  &#39;</span>
        <span class="n">order</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;order&#39;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="n">maxlen</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># max(map(lambda x: len(x), order))</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">order</span><span class="p">:</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">isWord</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="n">skey</span> <span class="o">=</span> <span class="n">key</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">skey</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
                <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">#</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indstr</span><span class="p">,</span> <span class="n">comment</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">skey</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;u&#39;&quot;</span><span class="p">):</span>
                <span class="n">skey</span> <span class="o">=</span> <span class="n">skey</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%-*s</span><span class="s1"> :&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indstr</span><span class="p">,</span> <span class="n">maxlen</span><span class="p">,</span> <span class="n">skey</span><span class="p">))</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Container</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">writeToStream</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeValue</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">)</span></div>

<div class="viewcode-block" id="Config"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Config">[docs]</a><span class="k">class</span> <span class="nc">Config</span><span class="p">(</span><span class="n">Mapping</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class represents a configuration, and is the only one which clients</span>
<span class="sd">    need to interface to, under normal circumstances.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="Config.Namespace"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Config.Namespace">[docs]</a>    <span class="k">class</span> <span class="nc">Namespace</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This internal class is used for implementing default namespaces.</span>

<span class="sd">        An instance acts as a namespace.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sys</span> <span class="o">=</span> <span class="n">sys</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">os</span> <span class="o">=</span> <span class="n">os</span></div>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">streamOrFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">PWD</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes an instance.</span>

<span class="sd">        @param streamOrFile: If specified, causes this instance to be loaded</span>
<span class="sd">        from the stream (by calling L{load}). If a string is provided, it is</span>
<span class="sd">        passed to L{streamOpener} to open a stream. Otherwise, the passed</span>
<span class="sd">        value is assumed to be a stream and used as is.</span>
<span class="sd">        @type streamOrFile: A readable stream (file-like object) or a name.</span>
<span class="sd">        @param parent: If specified, this becomes the parent of this instance</span>
<span class="sd">        in the configuration hierarchy.</span>
<span class="sd">        @type parent: a L{Container} instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span> <span class="c1"># Python 3 compatibility</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">streamOrFile</span><span class="p">,</span> <span class="n">unicode</span><span class="p">):</span>
                <span class="n">streamOrFile</span> <span class="o">=</span> <span class="n">streamOrFile</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">NameError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">Mapping</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;reader&#39;</span><span class="p">,</span> <span class="n">ConfigReader</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;namespaces&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">Config</span><span class="o">.</span><span class="n">Namespace</span><span class="p">()])</span>
        <span class="k">if</span> <span class="n">streamOrFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">streamOrFile</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">streamOrFile</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                <span class="k">global</span> <span class="n">streamOpener</span>
                <span class="k">if</span> <span class="n">streamOpener</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">streamOpener</span> <span class="o">=</span> <span class="n">defaultStreamOpener</span>
                <span class="n">streamOrFile</span> <span class="o">=</span> <span class="n">streamOpener</span><span class="p">(</span><span class="n">streamOrFile</span><span class="p">)</span>
            <span class="n">load</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">)</span>
            <span class="n">load</span><span class="p">(</span><span class="n">streamOrFile</span><span class="p">)</span>
            <span class="c1"># Specific add for salomeTools : PWD</span>
            <span class="k">if</span> <span class="n">PWD</span><span class="p">:</span>
                <span class="n">key</span><span class="p">,</span> <span class="n">pwd</span> <span class="o">=</span> <span class="n">PWD</span>
                <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">PWD</span> <span class="o">=</span> <span class="n">pwd</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">PWD</span> <span class="o">=</span> <span class="n">pwd</span>

<div class="viewcode-block" id="Config.load"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Config.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the configuration from the specified stream. Multiple streams can</span>
<span class="sd">        be used to populate the same instance, as long as there are no</span>
<span class="sd">        clashing keys. The stream is closed.</span>
<span class="sd">        @param stream: A stream from which the configuration is read.</span>
<span class="sd">        @type stream: A read-only stream (file-like object).</span>
<span class="sd">        @raise ConfigError: if keys in the loaded configuration clash with</span>
<span class="sd">        existing keys.</span>
<span class="sd">        @raise ConfigFormatError: if there is a syntax error in the stream.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;reader&#39;</span><span class="p">)</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="Config.addNamespace"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Config.addNamespace">[docs]</a>    <span class="k">def</span> <span class="nf">addNamespace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ns</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a namespace to this configuration which can be used to evaluate</span>
<span class="sd">        (resolve) dotted-identifier expressions.</span>
<span class="sd">        @param ns: The namespace to be added.</span>
<span class="sd">        @type ns: A module or other namespace suitable for passing as an</span>
<span class="sd">        argument to vars().</span>
<span class="sd">        @param name: A name for the namespace, which, if specified, provides</span>
<span class="sd">        an additional level of indirection.</span>
<span class="sd">        @type name: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">namespaces</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;namespaces&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">namespaces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">namespaces</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="p">,</span> <span class="n">ns</span><span class="p">)</span></div>

<div class="viewcode-block" id="Config.removeNamespace"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Config.removeNamespace">[docs]</a>    <span class="k">def</span> <span class="nf">removeNamespace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ns</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove a namespace added with L{addNamespace}.</span>
<span class="sd">        @param ns: The namespace to be removed.</span>
<span class="sd">        @param name: The name which was specified when L{addNamespace} was</span>
<span class="sd">        called.</span>
<span class="sd">        @type name: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">namespaces</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;namespaces&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">namespaces</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="n">namespaces</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__save__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">no_close</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save this configuration to the specified stream. The stream is</span>
<span class="sd">        closed if this is the top-level configuration in the hierarchy.</span>
<span class="sd">        L{Mapping.__save__} is called to do all the work.</span>
<span class="sd">        @param stream: A stream to which the configuration is written.</span>
<span class="sd">        @type stream: A write-only stream (file-like object).</span>
<span class="sd">        @param indent: The indentation level for the output.</span>
<span class="sd">        @type indent: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Mapping</span><span class="o">.</span><span class="n">__save__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">indent</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">no_close</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<div class="viewcode-block" id="Config.getByPath"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Config.getByPath">[docs]</a>    <span class="k">def</span> <span class="nf">getByPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain a value in the configuration via its path.</span>
<span class="sd">        @param path: The path of the required value</span>
<span class="sd">        @type path: str</span>
<span class="sd">        @return the value at the specified path.</span>
<span class="sd">        @rtype: any</span>
<span class="sd">        @raise ConfigError: If the path is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;self.&#39;</span> <span class="o">+</span> <span class="n">path</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">eval</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span><span class="s2">&quot;Config path not found: &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="Sequence"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Sequence">[docs]</a><span class="k">class</span> <span class="nc">Sequence</span><span class="p">(</span><span class="n">Container</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This internal class implements a value which is a sequence of other values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
<div class="viewcode-block" id="Sequence.SeqIter"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Sequence.SeqIter">[docs]</a>    <span class="k">class</span> <span class="nc">SeqIter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This internal class implements an iterator for a L{Sequence} instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">seq</span> <span class="o">=</span> <span class="n">seq</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span>

<div class="viewcode-block" id="Sequence.SeqIter.next"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Sequence.SeqIter.next">[docs]</a>        <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">StopIteration</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seq</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">rv</span></div>
        
        <span class="c1"># This method is for python3 compatibility</span>
        <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">StopIteration</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">seq</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">rv</span></div>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an instance.</span>

<span class="sd">        @param parent: The parent of this instance in the hierarchy.</span>
<span class="sd">        @type parent: A L{Container} instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Container</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">)</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">,</span> <span class="p">[])</span>

<div class="viewcode-block" id="Sequence.append"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Sequence.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an item to the sequence.</span>

<span class="sd">        @param item: The item to add.</span>
<span class="sd">        @type item: any</span>
<span class="sd">        @param comment: A comment for the item.</span>
<span class="sd">        @type comment: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="n">comments</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ConfigResolutionError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is not a valid index for </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">)))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># deal with a slice</span>
            <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="n">rv</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Sequence</span><span class="o">.</span><span class="n">SeqIter</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">[:])</span> <span class="c1"># using the slice evaluates the contents</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">))</span>

<div class="viewcode-block" id="Sequence.writeToStream"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Sequence.writeToStream">[docs]</a>    <span class="k">def</span> <span class="nf">writeToStream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write this instance to a stream at the specified indentation level.</span>

<span class="sd">        Should be redefined in subclasses.</span>

<span class="sd">        @param stream: The stream to write to</span>
<span class="sd">        @type stream: A writable stream (file-like object)</span>
<span class="sd">        @param indent: The indentation level</span>
<span class="sd">        @type indent: int</span>
<span class="sd">        @param container: The container of this instance</span>
<span class="sd">        @type container: L{Container}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">indstr</span> <span class="o">=</span> <span class="n">indent</span> <span class="o">*</span> <span class="s1">&#39;  &#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; [ ]</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">NEWLINE</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
                <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">NEWLINE</span><span class="p">)</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">[</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indstr</span><span class="p">,</span> <span class="n">NEWLINE</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__save__</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">]</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indstr</span><span class="p">,</span> <span class="n">NEWLINE</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">__save__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save this instance to the specified stream.</span>
<span class="sd">        @param stream: A stream to which the configuration is written.</span>
<span class="sd">        @type stream: A write-only stream (file-like object).</span>
<span class="sd">        @param indent: The indentation level for the output, &gt; 0</span>
<span class="sd">        @type indent: int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">indent</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span><span class="s2">&quot;sequence cannot be saved as a top-level item&quot;</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="n">comments</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">)</span>
        <span class="n">indstr</span> <span class="o">=</span> <span class="n">indent</span> <span class="o">*</span> <span class="s1">&#39;  &#39;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="n">comments</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">comment</span><span class="p">:</span>
                <span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">#</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indstr</span><span class="p">,</span> <span class="n">comment</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Container</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">writeToStream</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writeValue</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">indent</span><span class="p">)</span></div>

<div class="viewcode-block" id="Reference"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Reference">[docs]</a><span class="k">class</span> <span class="nc">Reference</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This internal class implements a value which is a reference to another value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">ident</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an instance.</span>

<span class="sd">        @param config: The configuration which contains this reference.</span>
<span class="sd">        @type config: A L{Config} instance.</span>
<span class="sd">        @param type: The type of reference.</span>
<span class="sd">        @type type: BACKTICK or DOLLAR</span>
<span class="sd">        @param ident: The identifier which starts the reference.</span>
<span class="sd">        @type ident: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span> <span class="o">=</span> <span class="p">[</span><span class="n">ident</span><span class="p">]</span>

<div class="viewcode-block" id="Reference.addElement"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Reference.addElement">[docs]</a>    <span class="k">def</span> <span class="nf">addElement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">ident</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an element to the reference.</span>

<span class="sd">        @param type: The type of reference.</span>
<span class="sd">        @type type: BACKTICK or DOLLAR</span>
<span class="sd">        @param ident: The identifier which continues the reference.</span>
<span class="sd">        @type ident: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">type</span><span class="p">,</span> <span class="n">ident</span><span class="p">))</span></div>

<div class="viewcode-block" id="Reference.findConfig"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Reference.findConfig">[docs]</a>    <span class="k">def</span> <span class="nf">findConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the closest enclosing configuration to the specified container.</span>

<span class="sd">        @param container: The container to start from.</span>
<span class="sd">        @type container: L{Container}</span>
<span class="sd">        @return: The closest enclosing configuration, or None.</span>
<span class="sd">        @rtype: L{Config}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">container</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">Config</span><span class="p">):</span>
            <span class="n">container</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="s1">&#39;parent&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">container</span></div>

<div class="viewcode-block" id="Reference.resolve"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Reference.resolve">[docs]</a>    <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Resolve this instance in the context of a container.</span>

<span class="sd">        @param container: The container to resolve from.</span>
<span class="sd">        @type container: L{Container}</span>
<span class="sd">        @return: The resolved value.</span>
<span class="sd">        @rtype: any</span>
<span class="sd">        @raise ConfigResolutionError: If resolution fails.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">path</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">)</span>
        <span class="n">current</span> <span class="o">=</span> <span class="n">container</span>
        <span class="k">while</span> <span class="n">current</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">BACKTICK</span><span class="p">:</span>
                <span class="n">namespaces</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="s1">&#39;namespaces&#39;</span><span class="p">)</span>
                <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">for</span> <span class="n">ns</span> <span class="ow">in</span> <span class="n">namespaces</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="nb">vars</span><span class="p">(</span><span class="n">ns</span><span class="p">))</span>
                        <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">break</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
                <span class="k">if</span> <span class="n">found</span><span class="p">:</span>
                    <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">current</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="k">break</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">pass</span>
            <span class="n">current</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">current</span><span class="p">,</span> <span class="s1">&#39;parent&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">current</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigResolutionError</span><span class="p">(</span><span class="s2">&quot;unable to evaluate </span><span class="si">%r</span><span class="s2"> in the configuration </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">rv</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">tt</span><span class="p">,</span> <span class="n">tv</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="k">if</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">DOT</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">tv</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">s</span> <span class="o">+=</span> <span class="s1">&#39;[</span><span class="si">%r</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="n">tv</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">BACKTICK</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">BACKTICK</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="n">BACKTICK</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DOLLAR</span> <span class="o">+</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span></div>

<div class="viewcode-block" id="Expression"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Expression">[docs]</a><span class="k">class</span> <span class="nc">Expression</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This internal class implements a value which is obtained by evaluating an expression.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">op</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize an instance.</span>

<span class="sd">        @param op: the operation expressed in the expression.</span>
<span class="sd">        @type op: PLUS, MINUS, STAR, SLASH, MOD</span>
<span class="sd">        @param lhs: the left-hand-side operand of the expression.</span>
<span class="sd">        @type lhs: any Expression or primary value.</span>
<span class="sd">        @param rhs: the right-hand-side operand of the expression.</span>
<span class="sd">        @type rhs: any Expression or primary value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">op</span> <span class="o">=</span> <span class="n">op</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lhs</span> <span class="o">=</span> <span class="n">lhs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rhs</span> <span class="o">=</span> <span class="n">rhs</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> </span><span class="si">%s</span><span class="s1"> </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lhs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>

<div class="viewcode-block" id="Expression.evaluate"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.Expression.evaluate">[docs]</a>    <span class="k">def</span> <span class="nf">evaluate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Evaluate this instance in the context of a container.</span>

<span class="sd">        @param container: The container to evaluate in from.</span>
<span class="sd">        @type container: L{Container}</span>
<span class="sd">        @return: The evaluated value.</span>
<span class="sd">        @rtype: any</span>
<span class="sd">        @raise ConfigResolutionError: If evaluation fails.</span>
<span class="sd">        @raise ZeroDivideError: If division by zero occurs.</span>
<span class="sd">        @raise TypeError: If the operation is invalid, e.g.</span>
<span class="sd">        subtracting one string from another.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lhs</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">Reference</span><span class="p">):</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="n">lhs</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">lhs</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="n">lhs</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
        <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rhs</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Reference</span><span class="p">):</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="n">rhs</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">Expression</span><span class="p">):</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="n">rhs</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">op</span>
        <span class="k">if</span> <span class="n">op</span> <span class="o">==</span> <span class="n">PLUS</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">lhs</span> <span class="o">+</span> <span class="n">rhs</span>
        <span class="k">elif</span> <span class="n">op</span> <span class="o">==</span> <span class="n">MINUS</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">lhs</span> <span class="o">-</span> <span class="n">rhs</span>
        <span class="k">elif</span> <span class="n">op</span> <span class="o">==</span> <span class="n">STAR</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">lhs</span> <span class="o">*</span> <span class="n">rhs</span>
        <span class="k">elif</span> <span class="n">op</span> <span class="o">==</span> <span class="n">SLASH</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">lhs</span> <span class="o">/</span> <span class="n">rhs</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">lhs</span> <span class="o">%</span> <span class="n">rhs</span>
        <span class="k">return</span> <span class="n">rv</span></div></div>

<div class="viewcode-block" id="ConfigReader"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader">[docs]</a><span class="k">class</span> <span class="nc">ConfigReader</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This internal class implements a parser for configurations.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colno</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_token</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">commentchars</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">whitespace</span> <span class="o">=</span> <span class="s1">&#39; </span><span class="se">\t\r\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quotes</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&quot;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">punct</span> <span class="o">=</span> <span class="s1">&#39;:-+*/%,.</span><span class="si">{}</span><span class="s1">[]()@`$&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">digits</span> <span class="o">=</span> <span class="s1">&#39;0123456789&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wordchars</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">WORDCHARS</span> <span class="c1"># make a copy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">identchars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wordchars</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">digits</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pbchars</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pbtokens</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="ConfigReader.location"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.location">[docs]</a>    <span class="k">def</span> <span class="nf">location</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current location (filename, line, column) in the stream</span>
<span class="sd">        as a string.</span>

<span class="sd">        Used when printing error messages,</span>

<span class="sd">        @return: A string representing a location in the stream being read.</span>
<span class="sd">        @rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%d</span><span class="s2">,</span><span class="si">%d</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">colno</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConfigReader.getChar"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.getChar">[docs]</a>    <span class="k">def</span> <span class="nf">getChar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the next char from the stream. Update line and column numbers</span>
<span class="sd">        appropriately.</span>

<span class="sd">        @return: The next character from the stream.</span>
<span class="sd">        @rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbchars</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbchars</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="nb">bytes</span><span class="p">):</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="nb">bytes</span><span class="p">):</span>
                <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colno</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colno</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">c</span></div>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;ConfigReader at 0x</span><span class="si">%08x</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="fm">__str__</span> <span class="o">=</span> <span class="fm">__repr__</span>

<div class="viewcode-block" id="ConfigReader.getToken"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.getToken">[docs]</a>    <span class="k">def</span> <span class="nf">getToken</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a token from the stream. String values are returned in a form</span>
<span class="sd">        where you need to eval() the returned value to get the actual</span>
<span class="sd">        string. The return value is (token_type, token_value).</span>

<span class="sd">        Multiline string tokenizing is thanks to David Janes (BlogMatrix)</span>

<span class="sd">        @return: The next token.</span>
<span class="sd">        @rtype: A token tuple.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbtokens</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pbtokens</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">token</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="n">EOF</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChar</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">+=</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="n">stream</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                <span class="k">else</span> <span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">quotes</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="n">c</span>
                <span class="n">quote</span> <span class="o">=</span> <span class="n">c</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="n">STRING</span>
                <span class="n">escaped</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">multiline</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">c1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChar</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">c1</span> <span class="o">==</span> <span class="n">quote</span><span class="p">:</span>
                    <span class="n">c2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChar</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">c2</span> <span class="o">==</span> <span class="n">quote</span><span class="p">:</span>
                        <span class="n">multiline</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">token</span> <span class="o">+=</span> <span class="n">quote</span>
                        <span class="n">token</span> <span class="o">+=</span> <span class="n">quote</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pbchars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c2</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pbchars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pbchars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChar</span><span class="p">()</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="n">token</span> <span class="o">+=</span> <span class="n">c</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="n">quote</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">escaped</span><span class="p">:</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">multiline</span> <span class="ow">or</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">token</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">6</span> <span class="ow">and</span> <span class="n">token</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">token</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span> <span class="ow">and</span> <span class="n">token</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">):</span>
                            <span class="k">break</span>
                    <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">:</span>
                        <span class="n">escaped</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">escaped</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">escaped</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: Unterminated quoted string: </span><span class="si">%r</span><span class="s1">, </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="n">token</span><span class="p">,</span> <span class="n">c</span><span class="p">))</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">whitespace</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lastc</span> <span class="o">=</span> <span class="n">c</span>
                <span class="k">continue</span>
            <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">punct</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="n">c</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="n">c</span>
                <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lastc</span> <span class="o">==</span> <span class="s1">&#39;]&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lastc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">identchars</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;[&#39;</span><span class="p">:</span>
                        <span class="n">tt</span> <span class="o">=</span> <span class="n">LBRACK2</span>
                    <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
                        <span class="n">tt</span> <span class="o">=</span> <span class="n">LPAREN2</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">digits</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="n">c</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="n">NUMBER</span>
                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChar</span><span class="p">()</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="p">:</span>
                        <span class="k">break</span>
                    <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">digits</span><span class="p">:</span>
                        <span class="n">token</span> <span class="o">+=</span> <span class="n">c</span>
                    <span class="k">elif</span> <span class="p">(</span><span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">token</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">token</span> <span class="o">+=</span> <span class="n">c</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">c</span> <span class="ow">and</span> <span class="p">(</span><span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">whitespace</span><span class="p">):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">pbchars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                        <span class="k">break</span>
                <span class="k">break</span>
            <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">wordchars</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="n">c</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="n">WORD</span>
                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChar</span><span class="p">()</span>
                <span class="k">while</span> <span class="n">c</span> <span class="ow">and</span> <span class="p">(</span><span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">identchars</span><span class="p">):</span>
                    <span class="n">token</span> <span class="o">+=</span> <span class="n">c</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChar</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">c</span><span class="p">:</span> <span class="c1"># and c not in self.whitespace:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pbchars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">token</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span><span class="p">:</span>
                    <span class="n">tt</span> <span class="o">=</span> <span class="n">TRUE</span>
                <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s2">&quot;False&quot;</span><span class="p">:</span>
                    <span class="n">tt</span> <span class="o">=</span> <span class="n">FALSE</span>
                <span class="k">elif</span> <span class="n">token</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
                    <span class="n">tt</span> <span class="o">=</span> <span class="n">NONE</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: Unexpected character: </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="n">c</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">token</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastc</span> <span class="o">=</span> <span class="n">token</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_token</span> <span class="o">=</span> <span class="n">tt</span>
        
        <span class="c1"># Python 2.x specific unicode conversion</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">WORD</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">unicode</span><span class="p">):</span>
            <span class="n">token</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">tt</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConfigReader.load"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the configuration from the specified stream.</span>

<span class="sd">        @param stream: A stream from which to load the configuration.</span>
<span class="sd">        @type stream: A stream (file-like object).</span>
<span class="sd">        @param parent: The parent of the configuration (to which this reader</span>
<span class="sd">        belongs) in the hierarchy. Specified when the configuration is</span>
<span class="sd">        included in another one.</span>
<span class="sd">        @type parent: A L{Container} instance.</span>
<span class="sd">        @param suffix: The suffix of this configuration in the parent</span>
<span class="sd">        configuration. Should be specified whenever the parent is not None.</span>
<span class="sd">        @raise ConfigError: If parent is specified but suffix is not.</span>
<span class="sd">        @raise ConfigFormatError: If there are syntax errors in the stream.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">suffix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span><span class="s2">&quot;internal error: load called with parent but no suffix&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">setPath</span><span class="p">(</span><span class="n">makePath</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">),</span> <span class="n">suffix</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStream</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parseMappingBody</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">EOF</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: expecting EOF, found </span><span class="si">%r</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span></div>

<div class="viewcode-block" id="ConfigReader.setStream"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.setStream">[docs]</a>    <span class="k">def</span> <span class="nf">setStream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the stream to the specified value, and prepare to read from it.</span>

<span class="sd">        @param stream: A stream from which to load the configuration.</span>
<span class="sd">        @type stream: A stream (file-like object).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">):</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;?&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lineno</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colno</span> <span class="o">=</span> <span class="mi">1</span></div>

<div class="viewcode-block" id="ConfigReader.match"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ensure that the current token type matches the specified value, and</span>
<span class="sd">        advance to the next token.</span>

<span class="sd">        @param t: The token type to match.</span>
<span class="sd">        @type t: A valid token type.</span>
<span class="sd">        @return: The token which was last read from the stream before this</span>
<span class="sd">        function is called.</span>
<span class="sd">        @rtype: a token tuple - see L{getToken}.</span>
<span class="sd">        @raise ConfigFormatError: If the token does not match what&#39;s expected.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">t</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: expecting </span><span class="si">%s</span><span class="s2">, found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="n">t</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">rv</span></div>

<div class="viewcode-block" id="ConfigReader.parseMappingBody"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseMappingBody">[docs]</a>    <span class="k">def</span> <span class="nf">parseMappingBody</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse the internals of a mapping, and add entries to the provided</span>
<span class="sd">        L{Mapping}.</span>

<span class="sd">        @param parent: The mapping to add entries to.</span>
<span class="sd">        @type parent: A L{Mapping} instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="n">WORD</span><span class="p">,</span> <span class="n">STRING</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parseKeyValuePair</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConfigReader.parseKeyValuePair"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseKeyValuePair">[docs]</a>    <span class="k">def</span> <span class="nf">parseKeyValuePair</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a key-value pair, and add it to the provided L{Mapping}.</span>

<span class="sd">        @param parent: The mapping to add entries to.</span>
<span class="sd">        @type parent: A L{Mapping} instance.</span>
<span class="sd">        @raise ConfigFormatError: if a syntax error is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span>
        <span class="n">tt</span><span class="p">,</span> <span class="n">tv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span>
        <span class="k">if</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">WORD</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">tv</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="n">tv</span>
        <span class="k">elif</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">STRING</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">tv</span><span class="p">)</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="s1">&#39;[</span><span class="si">%s</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="n">tv</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: expecting word or string, found </span><span class="si">%r</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="n">msg</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="n">tv</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span>
        <span class="c1"># for now, we allow key on its own as a short form of key : True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">COLON</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseValue</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parent</span><span class="o">.</span><span class="n">addMapping</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">comment</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: </span><span class="si">%s</span><span class="s2">, </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="n">e</span><span class="p">,</span>
                                    <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tt</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">EOF</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">STRING</span><span class="p">,</span> <span class="n">RCURLY</span><span class="p">,</span> <span class="n">COMMA</span><span class="p">]:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: expecting one of EOF, WORD, STRING, </span><span class="se">\</span>
<span class="s2">RCURLY, COMMA, found </span><span class="si">%r</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="n">msg</span>  <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">COMMA</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span></div>

<div class="viewcode-block" id="ConfigReader.parseValue"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseValue">[docs]</a>    <span class="k">def</span> <span class="nf">parseValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">suffix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a value.</span>

<span class="sd">        @param parent: The container to which the value will be added.</span>
<span class="sd">        @type parent: A L{Container} instance.</span>
<span class="sd">        @param suffix: The suffix for the value.</span>
<span class="sd">        @type suffix: str</span>
<span class="sd">        @return: The value</span>
<span class="sd">        @rtype: any</span>
<span class="sd">        @raise ConfigFormatError: if a syntax error is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tt</span> <span class="ow">in</span> <span class="p">[</span><span class="n">STRING</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">NUMBER</span><span class="p">,</span> <span class="n">LPAREN</span><span class="p">,</span> <span class="n">DOLLAR</span><span class="p">,</span>
                  <span class="n">TRUE</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">,</span> <span class="n">NONE</span><span class="p">,</span> <span class="n">BACKTICK</span><span class="p">,</span> <span class="n">MINUS</span><span class="p">]:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseScalar</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">LBRACK</span><span class="p">:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseSequence</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tt</span> <span class="ow">in</span> <span class="p">[</span><span class="n">LCURLY</span><span class="p">,</span> <span class="n">AT</span><span class="p">]:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseMapping</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: unexpected input: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span>
               <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">rv</span></div>

<div class="viewcode-block" id="ConfigReader.parseSequence"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseSequence">[docs]</a>    <span class="k">def</span> <span class="nf">parseSequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">suffix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a sequence.</span>

<span class="sd">        @param parent: The container to which the sequence will be added.</span>
<span class="sd">        @type parent: A L{Container} instance.</span>
<span class="sd">        @param suffix: The suffix for the value.</span>
<span class="sd">        @type suffix: str</span>
<span class="sd">        @return: a L{Sequence} instance representing the sequence.</span>
<span class="sd">        @rtype: L{Sequence}</span>
<span class="sd">        @raise ConfigFormatError: if a syntax error is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">Sequence</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
        <span class="n">rv</span><span class="o">.</span><span class="n">setPath</span><span class="p">(</span><span class="n">makePath</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">),</span> <span class="n">suffix</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">LBRACK</span><span class="p">)</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">while</span> <span class="n">tt</span> <span class="ow">in</span> <span class="p">[</span><span class="n">STRING</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">NUMBER</span><span class="p">,</span> <span class="n">LCURLY</span><span class="p">,</span> <span class="n">LBRACK</span><span class="p">,</span> <span class="n">LPAREN</span><span class="p">,</span> <span class="n">DOLLAR</span><span class="p">,</span>
                     <span class="n">TRUE</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">,</span> <span class="n">NONE</span><span class="p">,</span> <span class="n">BACKTICK</span><span class="p">]:</span>
            <span class="n">suffix</span> <span class="o">=</span> <span class="s1">&#39;[</span><span class="si">%d</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseValue</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
            <span class="n">rv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">comment</span><span class="p">)</span>
            <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span>
            <span class="k">if</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">COMMA</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">COMMA</span><span class="p">)</span>
                <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">comment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comment</span>
                <span class="k">continue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">RBRACK</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rv</span></div>

<div class="viewcode-block" id="ConfigReader.parseMapping"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseMapping">[docs]</a>    <span class="k">def</span> <span class="nf">parseMapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">suffix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a mapping.</span>

<span class="sd">        @param parent: The container to which the mapping will be added.</span>
<span class="sd">        @type parent: A L{Container} instance.</span>
<span class="sd">        @param suffix: The suffix for the value.</span>
<span class="sd">        @type suffix: str</span>
<span class="sd">        @return: a L{Mapping} instance representing the mapping.</span>
<span class="sd">        @rtype: L{Mapping}</span>
<span class="sd">        @raise ConfigFormatError: if a syntax error is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">LCURLY</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">LCURLY</span><span class="p">)</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">Mapping</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
            <span class="n">rv</span><span class="o">.</span><span class="n">setPath</span><span class="p">(</span>
               <span class="n">makePath</span><span class="p">(</span><span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s1">&#39;path&#39;</span><span class="p">),</span> <span class="n">suffix</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parseMappingBody</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">RCURLY</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">AT</span><span class="p">)</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">fn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">STRING</span><span class="p">)</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">Config</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">fn</span><span class="p">),</span> <span class="n">parent</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rv</span></div>

<div class="viewcode-block" id="ConfigReader.parseScalar"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseScalar">[docs]</a>    <span class="k">def</span> <span class="nf">parseScalar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a scalar - a terminal value such as a string or number, or</span>
<span class="sd">        an L{Expression} or L{Reference}.</span>

<span class="sd">        @return: the parsed scalar</span>
<span class="sd">        @rtype: any scalar</span>
<span class="sd">        @raise ConfigFormatError: if a syntax error is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseTerm</span><span class="p">()</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">while</span> <span class="n">tt</span> <span class="ow">in</span> <span class="p">[</span><span class="n">PLUS</span><span class="p">,</span> <span class="n">MINUS</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseTerm</span><span class="p">()</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">tt</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
            <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">lhs</span></div>

<div class="viewcode-block" id="ConfigReader.parseTerm"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseTerm">[docs]</a>    <span class="k">def</span> <span class="nf">parseTerm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a term in an additive expression (a + b, a - b)</span>

<span class="sd">        @return: the parsed term</span>
<span class="sd">        @rtype: any scalar</span>
<span class="sd">        @raise ConfigFormatError: if a syntax error is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseFactor</span><span class="p">()</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">while</span> <span class="n">tt</span> <span class="ow">in</span> <span class="p">[</span><span class="n">STAR</span><span class="p">,</span> <span class="n">SLASH</span><span class="p">,</span> <span class="n">MOD</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span>
            <span class="n">rhs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseFactor</span><span class="p">()</span>
            <span class="n">lhs</span> <span class="o">=</span> <span class="n">Expression</span><span class="p">(</span><span class="n">tt</span><span class="p">,</span> <span class="n">lhs</span><span class="p">,</span> <span class="n">rhs</span><span class="p">)</span>
            <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">lhs</span></div>

<div class="viewcode-block" id="ConfigReader.parseFactor"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseFactor">[docs]</a>    <span class="k">def</span> <span class="nf">parseFactor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a factor in an multiplicative expression (a * b, a / b, a % b)</span>

<span class="sd">        @return: the parsed factor</span>
<span class="sd">        @rtype: any scalar</span>
<span class="sd">        @raise ConfigFormatError: if a syntax error is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tt</span> <span class="ow">in</span> <span class="p">[</span><span class="n">NUMBER</span><span class="p">,</span> <span class="n">WORD</span><span class="p">,</span> <span class="n">STRING</span><span class="p">,</span> <span class="n">TRUE</span><span class="p">,</span> <span class="n">FALSE</span><span class="p">,</span> <span class="n">NONE</span><span class="p">]:</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">tt</span> <span class="o">!=</span> <span class="n">WORD</span><span class="p">:</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">LPAREN</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">LPAREN</span><span class="p">)</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseScalar</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">RPAREN</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">DOLLAR</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">DOLLAR</span><span class="p">)</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseReference</span><span class="p">(</span><span class="n">DOLLAR</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">BACKTICK</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">BACKTICK</span><span class="p">)</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parseReference</span><span class="p">(</span><span class="n">BACKTICK</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">BACKTICK</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">MINUS</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">MINUS</span><span class="p">)</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">parseScalar</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: unexpected input: </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span>
               <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">return</span> <span class="n">rv</span></div>

<div class="viewcode-block" id="ConfigReader.parseReference"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseReference">[docs]</a>    <span class="k">def</span> <span class="nf">parseReference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a reference.</span>

<span class="sd">        @return: the parsed reference</span>
<span class="sd">        @rtype: L{Reference}</span>
<span class="sd">        @raise ConfigFormatError: if a syntax error is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">WORD</span><span class="p">)</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">Reference</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="n">DOT</span><span class="p">,</span> <span class="n">LBRACK2</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parseSuffix</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rv</span></div>

<div class="viewcode-block" id="ConfigReader.parseSuffix"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigReader.parseSuffix">[docs]</a>    <span class="k">def</span> <span class="nf">parseSuffix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse a reference suffix.</span>

<span class="sd">        @param ref: The reference of which this suffix is a part.</span>
<span class="sd">        @type ref: L{Reference}.</span>
<span class="sd">        @raise ConfigFormatError: if a syntax error is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">DOT</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">DOT</span><span class="p">)</span>
            <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">WORD</span><span class="p">)</span>
            <span class="n">ref</span><span class="o">.</span><span class="n">addElement</span><span class="p">(</span><span class="n">DOT</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">LBRACK2</span><span class="p">)</span>
            <span class="n">tt</span><span class="p">,</span> <span class="n">tv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">token</span>
            <span class="k">if</span> <span class="n">tt</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">NUMBER</span><span class="p">,</span> <span class="n">STRING</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="n">ConfigFormatError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">: expected number or string, found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">(),</span> <span class="n">tv</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getToken</span><span class="p">()</span>
            <span class="n">tv</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">tv</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">RBRACK</span><span class="p">)</span>
            <span class="n">ref</span><span class="o">.</span><span class="n">addElement</span><span class="p">(</span><span class="n">LBRACK</span><span class="p">,</span> <span class="n">tv</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="defaultMergeResolve"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.defaultMergeResolve">[docs]</a><span class="k">def</span> <span class="nf">defaultMergeResolve</span><span class="p">(</span><span class="n">map1</span><span class="p">,</span> <span class="n">map2</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A default resolver for merge conflicts. </span>
<span class="sd">    Returns a string indicating what action to take to resolve the conflict.</span>

<span class="sd">    @param map1: The map being merged into.</span>
<span class="sd">    @type map1: L{Mapping}.</span>
<span class="sd">    @param map2: The map being used as the merge operand.</span>
<span class="sd">    @type map2: L{Mapping}.</span>
<span class="sd">    @param key: The key in map2 (which also exists in map1).</span>
<span class="sd">    @type key: str</span>
<span class="sd">    @return: One of &quot;merge&quot;, &quot;append&quot;, &quot;mismatch&quot; or &quot;overwrite&quot; </span>
<span class="sd">    indicating what action should be taken. This should</span>
<span class="sd">    be appropriate to the objects being merged - e.g.</span>
<span class="sd">    there is no point returning &quot;merge&quot; if the two objects</span>
<span class="sd">    are instances of L{Sequence}.</span>
<span class="sd">    @rtype: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj1</span> <span class="o">=</span> <span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="n">obj2</span> <span class="o">=</span> <span class="n">map2</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj2</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;merge&quot;</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj2</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">):</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;append&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;mismatch&quot;</span>
    <span class="k">return</span> <span class="n">rv</span></div>

<div class="viewcode-block" id="overwriteMergeResolve"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.overwriteMergeResolve">[docs]</a><span class="k">def</span> <span class="nf">overwriteMergeResolve</span><span class="p">(</span><span class="n">map1</span><span class="p">,</span> <span class="n">map2</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An overwriting resolver for merge conflicts. Calls L{defaultMergeResolve},</span>
<span class="sd">    but where a &quot;mismatch&quot; is detected, returns &quot;overwrite&quot; instead.</span>

<span class="sd">    @param map1: The map being merged into.</span>
<span class="sd">    @type map1: L{Mapping}.</span>
<span class="sd">    @param map2: The map being used as the merge operand.</span>
<span class="sd">    @type map2: L{Mapping}.</span>
<span class="sd">    @param key: The key in map2 (which also exists in map1).</span>
<span class="sd">    @type key: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rv</span> <span class="o">=</span> <span class="n">defaultMergeResolve</span><span class="p">(</span><span class="n">map1</span><span class="p">,</span> <span class="n">map2</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rv</span> <span class="o">==</span> <span class="s2">&quot;mismatch&quot;</span><span class="p">:</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;overwrite&quot;</span>
    <span class="k">return</span> <span class="n">rv</span></div>

<div class="viewcode-block" id="deepCopyMapping"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.deepCopyMapping">[docs]</a><span class="k">def</span> <span class="nf">deepCopyMapping</span><span class="p">(</span><span class="n">inMapping</span><span class="p">):</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">Mapping</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">inMapping</span><span class="p">:</span>
        <span class="n">res</span><span class="p">[</span><span class="n">element</span><span class="p">]</span> <span class="o">=</span> <span class="n">inMapping</span><span class="p">[</span><span class="n">element</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="ConfigMerger"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigMerger">[docs]</a><span class="k">class</span> <span class="nc">ConfigMerger</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class is used for merging two configurations. If a key exists in the</span>
<span class="sd">    merge operand but not the merge target, then the entry is copied from the</span>
<span class="sd">    merge operand to the merge target. If a key exists in both configurations,</span>
<span class="sd">    then a resolver (a callable) is called to decide how to handle the</span>
<span class="sd">    conflict.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resolver</span><span class="o">=</span><span class="n">defaultMergeResolve</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialise an instance.</span>

<span class="sd">        @param resolver:</span>
<span class="sd">        @type resolver: A callable which takes the argument list</span>
<span class="sd">        (map1, map2, key) where map1 is the mapping being merged into,</span>
<span class="sd">        map2 is the merge operand and key is the clashing key. The callable</span>
<span class="sd">        should return a string indicating how the conflict should be resolved.</span>
<span class="sd">        For possible return values, see L{defaultMergeResolve}. The default</span>
<span class="sd">        value preserves the old behaviour</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resolver</span> <span class="o">=</span> <span class="n">resolver</span>

<div class="viewcode-block" id="ConfigMerger.merge"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigMerger.merge">[docs]</a>    <span class="k">def</span> <span class="nf">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">merged</span><span class="p">,</span> <span class="n">mergee</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge two configurations. The second configuration is unchanged,</span>
<span class="sd">        and the first is changed to reflect the results of the merge.</span>

<span class="sd">        @param merged: The configuration to merge into.</span>
<span class="sd">        @type merged: L{Config}.</span>
<span class="sd">        @param mergee: The configuration to merge.</span>
<span class="sd">        @type mergee: L{Config}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mergeMapping</span><span class="p">(</span><span class="n">merged</span><span class="p">,</span> <span class="n">mergee</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConfigMerger.overwriteKeys"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigMerger.overwriteKeys">[docs]</a>    <span class="k">def</span> <span class="nf">overwriteKeys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">map1</span><span class="p">,</span> <span class="n">seq2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renint variables. The second mapping is unchanged,</span>
<span class="sd">        and the first is changed depending the keys of the second mapping.</span>
<span class="sd">        @param map1: The mapping to reinit keys into.</span>
<span class="sd">        @type map1: L{Mapping}.</span>
<span class="sd">        @param map2: The mapping container reinit information.</span>
<span class="sd">        @type map2: L{Mapping}.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">overwrite_list</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">seq2</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">overwrite_instruction</span> <span class="ow">in</span> <span class="n">overwrite_list</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">overwrite_instruction</span><span class="p">,</span> <span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="n">map1</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;__condition__&quot;</span> <span class="ow">in</span> <span class="n">overwrite_instruction</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">overwrite_condition</span> <span class="o">=</span> <span class="n">overwrite_instruction</span><span class="p">[</span><span class="s2">&quot;__condition__&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">eval</span><span class="p">(</span><span class="n">overwrite_condition</span><span class="p">,</span> <span class="nb">globals</span><span class="p">(),</span> <span class="n">map1</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">overwrite_instruction</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;__condition__&quot;</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">exec</span><span class="p">(</span> <span class="s1">&#39;map1.&#39;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">overwrite_instruction</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;map1.&#39;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">overwrite_instruction</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">overwrite_instruction</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;map1.&#39;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">overwrite_instruction</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">exec</span><span class="p">(</span><span class="s1">&#39;map1.&#39;</span> <span class="o">+</span> <span class="n">key</span> <span class="o">+</span> <span class="s2">&quot; = &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">overwrite_instruction</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span></div>

<div class="viewcode-block" id="ConfigMerger.mergeMapping"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigMerger.mergeMapping">[docs]</a>    <span class="k">def</span> <span class="nf">mergeMapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">map1</span><span class="p">,</span> <span class="n">map2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge two mappings recursively. The second mapping is unchanged,</span>
<span class="sd">        and the first is changed to reflect the results of the merge.</span>

<span class="sd">        @param map1: The mapping to merge into.</span>
<span class="sd">        @type map1: L{Mapping}.</span>
<span class="sd">        @param map2: The mapping to merge.</span>
<span class="sd">        @type map2: L{Mapping}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="n">map1</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">global</span> <span class="n">__resolveOverwrite__</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">map2</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">__resolveOverwrite__</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">==</span> <span class="s2">&quot;__overwrite__&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">overwriteKeys</span><span class="p">(</span><span class="n">map1</span><span class="p">,</span><span class="n">map2</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>

            <span class="k">elif</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
                <span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">map2</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">Container</span><span class="p">)</span> <span class="p">:</span>
                    <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="n">map1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">obj1</span> <span class="o">=</span> <span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="n">obj2</span> <span class="o">=</span> <span class="n">map2</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="n">decision</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolver</span><span class="p">(</span><span class="n">map1</span><span class="p">,</span> <span class="n">map2</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">decision</span> <span class="o">==</span> <span class="s2">&quot;merge&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mergeMapping</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">decision</span> <span class="o">==</span> <span class="s2">&quot;append&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mergeSequence</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">decision</span> <span class="o">==</span> <span class="s2">&quot;overwrite&quot;</span><span class="p">:</span>
                    <span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj2</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="n">Container</span><span class="p">):</span>
                        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">map1</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="s1">&#39;parent&#39;</span><span class="p">,</span> <span class="n">map1</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">decision</span> <span class="o">==</span> <span class="s2">&quot;mismatch&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">handleMismatch</span><span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;unable to merge: don&#39;t know how to implement </span><span class="si">%r</span><span class="s2">&quot;</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span> <span class="o">%</span> <span class="n">decision</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConfigMerger.mergeSequence"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigMerger.mergeSequence">[docs]</a>    <span class="k">def</span> <span class="nf">mergeSequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seq1</span><span class="p">,</span> <span class="n">seq2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge two sequences. The second sequence is unchanged,</span>
<span class="sd">        and the first is changed to have the elements of the second</span>
<span class="sd">        appended to it.</span>

<span class="sd">        @param seq1: The sequence to merge into.</span>
<span class="sd">        @type seq1: L{Sequence}.</span>
<span class="sd">        @param seq2: The sequence to merge.</span>
<span class="sd">        @type seq2: L{Sequence}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data1</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">seq1</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="n">data2</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">seq2</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">data2</span><span class="p">:</span>
            <span class="n">data1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">comment1</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">seq1</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">)</span>
        <span class="n">comment2</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="n">seq2</span><span class="p">,</span> <span class="s1">&#39;comments&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">comment2</span><span class="p">:</span>
            <span class="n">comment1</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConfigMerger.handleMismatch"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigMerger.handleMismatch">[docs]</a>    <span class="k">def</span> <span class="nf">handleMismatch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Handle a mismatch between two objects.</span>

<span class="sd">        @param obj1: The object to merge into.</span>
<span class="sd">        @type obj1: any</span>
<span class="sd">        @param obj2: The object to merge.</span>
<span class="sd">        @type obj2: any</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span><span class="s2">&quot;unable to merge </span><span class="si">%r</span><span class="s2"> with </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj2</span><span class="p">))</span></div></div>

<div class="viewcode-block" id="ConfigList"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigList">[docs]</a><span class="k">class</span> <span class="nc">ConfigList</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class implements an ordered list of configurations and allows you</span>
<span class="sd">    to try getting the configuration from each entry in turn, returning</span>
<span class="sd">    the first successfully obtained value.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ConfigList.getByPath"><a class="viewcode-back" href="../../apidoc_src/src.html#src.pyconf.ConfigList.getByPath">[docs]</a>    <span class="k">def</span> <span class="nf">getByPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Obtain a value from the first configuration in the list which defines</span>
<span class="sd">        it.</span>

<span class="sd">        @param path: The path of the value to retrieve.</span>
<span class="sd">        @type path: str</span>
<span class="sd">        @return: The value from the earliest configuration in the list which</span>
<span class="sd">        defines it.</span>
<span class="sd">        @rtype: any</span>
<span class="sd">        @raise ConfigError: If no configuration in the list has an entry with</span>
<span class="sd">        the specified path.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">getByPath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
                <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="n">ConfigError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConfigError</span><span class="p">(</span><span class="s2">&quot;ConfigList path not found &#39;</span><span class="si">%r</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rv</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/sat_v5.0.png" alt="Logo"/>
            </a></p><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, CEA.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>